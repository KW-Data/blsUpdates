{
    "collab_server" : "",
    "contents" : "\n# library(devtools)\n# install_github(\"mikeasilva/blsAPI\")\nlibrary(shiny)\nlibrary(RCurl)\nlibrary(RJSONIO)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(scales)\nlibrary(plotly)\nlibrary(treemap)\n\nload('laborForce.Rda')\nload('employment.Rda')\nload('unemployment.Rda')\n\n\n\nas <- asPostings - baPostings\nba <- baPostings\nother <- totalPostings - asPostings\n\nas    <- as.data.frame(as)\nba    <- as.data.frame(ba)\nother <- as.data.frame(other)\n\ncolnames(as)[1] <- \"postings\"\ncolnames(ba)[1] <- \"postings\"\ncolnames(other)[1] <- \"postings\"\n\nas$label    <- paste(\"Associate's degree job postings\", \"\\n\", percent(as$postings/totalPostings))\nba$label    <- paste(\"Bachelor's or higher job postings\", \"\\n\", percent(ba$postings/totalPostings))\nother$label <- paste(\"All other job postings\", \"\\n\",  percent(other$postings/totalPostings))\n\neduPostings <- rbind(other, as, ba)\n\n###################### Convert values to numeric \n### Labor Force ###\n# laborForceData$value         <- as.numeric(as.character(laborForceData$value))\n# UnitedStatesLaborForce$value <- as.numeric(as.character(UnitedStatesLaborForce$value))\n# \n# ### Unemployment ###\n# unemploymentRateData$value   <- as.numeric(as.character(unemploymentRateData$value))\n\n# lastYearUnemployment <- unemploymentRateData %>%\n#                             filter(year == 2015 | year == 2016) %>%\n#                             select(area, value, year)\n# \n# \n# thisYearUnemployment <- unemploymentRateData %>%\n#                             filter(year == 2017)\n\nfont     <- list(\n       family = \"Helvetica, sans-serif\",\n       size = 20,\n       color = \"#1f1f2e\")\n\naxisFont <- list(\n       size = 18)\n\nxAxis    <- list(\n       title = \"Year\",\n       titlefont = axisFont)\n\n\nyAxisLaborForce       <- list(\n                            title = \"Labor Force\",\n                            titlefont = axisFont)\n\nyAxisEmployment       <- list(\n                            title = \"Employment\",\n                            titlefont = axisFont)\n\nyAxisUnemploymentRate <- list(\n                            title = \"Unemployment Rate\",\n                            titlefont = axisFont)\n       \n\nmargin = list(\n              l = 80,\n              r = 50,\n              b = 100,\n              t = 50,\n              pad = 1)\n\n################################################### SHINY SERVER\n\nshinyServer(function(input, output) {\n  #      \n  # output$unemploymentLastYear <- renderDataTable({\n  #        lastYearUnemployment\n  # \n  # })\n  # output$unemploymentThisYear <- renderPrint({\n  #        print(thisYearUnemployment)\n  # })\n\n           \n  output$laborForcePlot <- renderPlotly({\n         \n         plot_ly(laborForceData, \n                 x = ~year, \n                 y = ~value, \n                 color = ~area,\n                 type = 'scatter', \n                 mode = 'lines+markers') %>%\n                layout(\n                       autosize = F, \n                       # width  = 700, \n                       # height = 500, \n                       margin = margin, \n                       xaxis  = xAxis, \n                       yaxis  = yAxisLaborForce,\n                       font   = font, \n                       legend = list(\n                              x = .6, \n                              y = .6))\n  })\n  \n  \n  output$unemploymentRatePlot <-  renderPlotly({\n         \n         plot_ly(unemploymentRateData, \n                 x = ~year, \n                 y = ~value, \n                 color = ~area,\n                 type = 'scatter', \n                 mode = 'lines+markers') %>%\n                layout(\n                       autosize = F, \n                       # width  = 700, \n                       # height = 500, \n                       margin = margin, \n                       xaxis  = xAxis, \n                       yaxis  = yAxisUnemploymentRate,\n                       font   = font, \n                       legend = list(\n                              x = .7, \n                              y = .95))\n\n  })\n  \n  output$employmentPlot <- renderPlotly({\n         \n         plot_ly(employmentData, \n                 x = ~year, \n                 y = ~value, \n                 color = ~area,\n                 type = 'scatter', \n                 mode = 'lines+markers') %>%\n                layout(\n                       autosize = F, \n                       # width  = 700, \n                       # height = 500, \n                       margin = margin, \n                       xaxis  = xAxis, \n                       yaxis  = yAxisEmployment,\n                       font   = font, \n                       legend = list(\n                              x = .6, \n                              y = .6))\n  })\n  \n  output$postingsTreemap <- renderPlot({\n         treemap(eduPostings, \"label\",  \"postings\", title = \"\")\n  })\n\n})\n",
    "created" : 1480602829289.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2807088343",
    "id" : "9C751B",
    "lastKnownWriteTime" : 1494427214,
    "last_content_update" : 1494427214810,
    "path" : "~/Desktop/shinyBlsUpdates/server.R",
    "project_path" : "server.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}